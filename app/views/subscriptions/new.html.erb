<% redirect_to new_user_registration_path if current_user.nil? %>
<h1 class="text-center">Subscriptions</h1>
<p class="text-center text-2xl">Amount to be paid for lifetime subscription: <%= @amount/100 %> EURO
<%= form_with url: subscriptions_path, local: true, method: :post, id: 'payment-form' , class: 'w-full max-w-md container m-auto p-4' do |form| %>
  <div class="flex flex-wrap -mx-3 mb-6">
    <div class="w-full px-3 mb-6 md:mb-0">
      <%= form.label 'Credit or debit card', class: 'ca-form-label' %>
    </div>
  </div>
  <div class="flex flex-wrap -mx-3 m-4">
    <div class="w-full px-3 mb-6 md:mb-0">
      <div id="card-element" class="mx-2"></div>
    </div>
  </div>
  <div class="flex flex-wrap -mx-3 m-4">
    <div class="w-full px-3 mb-6 md:mb-0">
      <div id="card-errors" role="alert"></div>
    </div>
  </div>
  <div class="flex flex-wrap -mx-3 m-4">
    <div class="w-full px-3 mb-6 md:mb-0">
      <%= form.submit 'Submit Payment', class: 'bg-blue hover:bg-blue-dark text-white font-bold py-2 px-4 rounded' %>
      <%= button_tag 'Cancel', id: 'cancel_payment', class: "flex-no-shrink border-transparent border-4 text-teal hover:text-teal-darker text-sm py-1 px-2 rounded" %>
    </div>
  </div>
<% end %>
